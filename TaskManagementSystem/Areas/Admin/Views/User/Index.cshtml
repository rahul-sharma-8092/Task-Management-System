@model TaskManagementSystem.Models.User

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}
<div class="">
    <h3 class="text-center" style="color: #0026ff;">User List</h3>
    <table class="table table-striped table-hover" style="border: 1px solid #808080">
        <thead class="thead-dark">
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th class="text-center">Mobile</th>
                <th class="text-center">Joining Date</th>
                <th class="text-center">Role</th>
                <th class="text-center">Image</th>
                <th class="text-center">Status</th>
                <th class="text-center">Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.UserList)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => item.FullName)</td>
                    <td>@Html.DisplayFor(modelItem => item.Email)</td>
                    <td class="text-center">@Html.DisplayFor(modelItem => item.Mobile)</td>
                    <td class="text-center">@Html.DisplayFor(modelItem => item.DateOfJoining)</td>
                    <td class="text-center">@Html.DisplayFor(modelItem => item.Role)</td>
                    <td class="text-center">
                        @if (!string.IsNullOrEmpty(item.ImagePath))
                        {
                            <img src="@item.ImagePath" alt="User Image" onclick="popModel(this)" style="cursor:pointer; width: 70px; height: 70px; object-fit:cover; border-radius: 50%; border: 1px solid #000000;" />
                        }
                        else
                        { <span class="text-danger">No Image found</span>}
                    </td>
                    @if (!item.IsDeleted)
                    {
                        <td class="text-success">Active</td>
                    }
                    else
                    {
                        <td class="text-danger">In-Active</td>
                    }
                    <td>
                        <div class="dropdown text-center">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Action
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="min-width: max-content;">
                                @Html.ActionLink("Edit", "Edit", new { id = item.UserId, area = "Admin" }, new { @class = "dropdown-item" })
                                @Html.ActionLink("Delete", "Delete", new { id = item.UserId, area = "Admin" }, new { @class = "dropdown-item" })
                            </div>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document" style="max-width:fit-content">
            <div class="modal-content">
                <div class="modal-body">
                    <img src="#" alt="Large Image" id="modalImage" class="img-fluid" style="max-width: 1000px; max-height: 700px">
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
<script>
    function openModal(imageUrl) {
        $('#modalImage').attr('src', imageUrl); 
        $('#imageModal').modal('show');
    }
    function popModel(img) {
        var imageUrl = $(img).attr('src');
        console.log(imageUrl)
        openModal(imageUrl); 
    }
</script>
}